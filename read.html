<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<link rel="icon" type="image/x-icon" href="library/logoo.ico" />
	<!--[if IE]><link rel="shortcut icon" type="image/x-icon" href="favicon.ico" /><![endif]-->
	<title>Regardez Gintama</title>
	<script src='nikolib.js'></script>
</head>

<body>

	<span onclick="plusdix()" id='num'>1 </span>

	<div id='menu'>
		<a id=back href="index.html"> Back</a>
	</div>
	<div class="numero">

		<select id='pages2' onfocus='changesize();' onchange='changesize2();' size='1'>
			<option id='lapage' value="1">Page 1</option>
			<option id='lapage' value="2">Page 2</option>
			<option id='lapage' value="3">Page 3</option>
			<option id='lapage' value="4">Page 4</option>
			<option id='lapage' value="5">Page 5</option>
			<option id='lapage' value="6">Page 6</option>
			<option id='lapage' value="7">Page 7</option>
			<option id='lapage' value="8">Page 8</option>
			<option id='lapage' value="9">Page 9</option>
			<option id='lapage' value="10">Page 10</option>
			<option id='lapage' value="11">Page 11</option>
			<option id='lapage' value="12">Page 12</option>
			<option id='lapage' value="13">Page 13</option>
			<option id='lapage' value="14">Page 14</option>
			<option id='lapage' value="15">Page 15</option>
			<option id='lapage' value="16">Page 16</option>
			<option id='lapage' value="17">Page 17</option>
			<option id='lapage' value="18">Page 18</option>
			<option id='lapage' value="19">Page 19</option>
			<option id='lapage' value="20">Page 20</option>
			<option id='lapage' value="21">Page 21</option>
			<option id='lapage' value="22">Page 22</option>
			<option id='lapage' value="23">Page 23</option>
			<option id='lapage' value="24">Page 24</option>
			<option id='lapage' value="25">Page 25</option>
			<option id='lapage' value="26">Page 26</option>
			<option id='lapage' value="27">Page 27</option>
			<option id='lapage' value="28">Page 28</option>
			<option id='lapage' value="29">Page 29</option>
			<option id='lapage' value="30">Page 30</option>
			<option id='lapage' value="31">Page 31</option>
			<option id='lapage' value="32">Page 32</option>
			<option id='lapage' value="33">Page 33</option>
			<option id='lapage' value="34">Page 34</option>
			<option id='lapage' value="35">Page 35</option>
			<option id='lapage' value="36">Page 36</option>
			<option id='lapage' value="37">Page 37</option>
			<option id='lapage' value="38">Page 38</option>
			<option id='lapage' value="39">Page 39</option>
			<option id='lapage' value="40">Page 40</option>
			<option id='lapage' value="41">Page 41</option>
			<option id='lapage' value="42">Page 42</option>
			<option id='lapage' value="43">Page 43</option>
			<option id='lapage' value="44">Page 44</option>
			<option id='lapage' value="45">Page 45</option>
			<option id='lapage' value="46">Page 46</option>
			<option id='lapage' value="47">Page 47</option>


		</select>
		<select id='pages1' onfocus='changesize();' onchange='changesize2();' size='1'>
			<option id='lapage' value="1">Page 1</option>
			<option id='lapage' value="2">Page 2</option>
			<option id='lapage' value="3">Page 3</option>
			<option id='lapage' value="4">Page 4</option>
			<option id='lapage' value="5">Page 5</option>
			<option id='lapage' value="6">Page 6</option>
			<option id='lapage' value="7">Page 7</option>
			<option id='lapage' value="8">Page 8</option>
			<option id='lapage' value="9">Page 9</option>
			<option id='lapage' value="10">Page 10</option>
			<option id='lapage' value="11">Page 11</option>
			<option id='lapage' value="12">Page 12</option>
		</select>
		<select id='pages' onfocus='changesize();' onchange='changesize2();' size='1'>
			<option id='lapage' value="1">Page 1</option>
			<option id='lapage' value="2">Page 2</option>
			<option id='lapage' value="3">Page 3</option>
			<option id='lapage' value="4">Page 4</option>
			<option id='lapage' value="5">Page 5</option>
		</select>

	</div>


	<div id='plaque' onclick='zoom()'></div>
	<img class='image1' id='limage' src=''>
	<img class='image2' id='limage' src=''>
	<div id='left' onclick='change("+")' class='button'></div>
	<div id='right' onclick='change("-")' class='button'></div>

</body>
<script>
	var lang = 'jp';
	var page = 1;


	const limage1 = document.querySelector(".image1")
	const limage2 = document.querySelector(".image2")
	var zoomed = false;
	var total = $_GET('total');
	var niconiconii = $_GET('niconiconii');
	document.getElementsByTagName('img')[0].style.height = '98vh';
	document.getElementsByTagName('img')[1].style.height = '98vh';
	var windowX = window.innerWidth;
	if (windowX < 612) {
		document.getElementById('right').style.opacity = '0%';
		document.getElementById('left').style.opacity = '0%';
		document.getElementById('plaque').onclick = function () { switchlang() };

	}
	document.getElementsByTagName('img')[0].src = 'library/' + niconiconii + '/' + lang + '/' + 'A (' + page + ')' + '.png';
	document.getElementsByTagName('img')[1].src = 'library/' + niconiconii + '/' + lang + '/' + 'A (' + page + ')' + '.png';
	document.getElementById('num').innerHTML = page;

	setInterval(() => {
		if (limage1.animationPlayState == "running") {
			console.log("Désolé ! preventDefault() ne vous laissera pas cocher ceci.");
		}
	}, 5);


	let isTurnable = 'true'
	function change(symb) {
		if (symb == '+') {
			if (page < total) {
				if (isTurnable == false) return;
				isTurnable = false;
				setTimeout(function () {
					limage1.style.animation = "partant 750ms";
				}, 1);
				setTimeout(function () {
					limage1.style.animation = "1ms";
				}, 780);
				setTimeout(function () {
					limage2.style.animation = "venant  730ms";

				}, 1);
				setTimeout(function () {
					limage2.style.animation = "1ms";

				}, 760);
				page++;
				document.querySelector("#pages").value = page;
				document.querySelector("#pages1").value = page;
				document.querySelector("#pages2").value = page;
				window.scrollTo(0, 0);
				setTimeout(function () {
					isTurnable = true;

				}, 790);
			}

		} else if (symb == '=') {
			page = page
		} else {
			if (page != 1) {
				if (isTurnable == false) return;
				isTurnable = false;
				page--;
				document.querySelector("#pages").value = page;
				document.querySelector("#pages1").value = page;
				document.querySelector("#pages2").value = page;
				limage1.style.animation = "partantback 750ms";
				setTimeout(function () {
					limage1.style.animation = "1ms";
				}, 770);
				setTimeout(function () {
					limage2.style.animation = "venantback  730ms";
				}, 1);
				setTimeout(function () {
					limage2.style.animation = "1ms";
				}, 750);
				window.scrollTo(0, 0);
				setTimeout(function () {
					isTurnable = true;

				}, 790);

			}
		}
		document.getElementsByTagName('img')[0].src = 'library/' + niconiconii + '/' + lang + '/' + 'A (' + page + ')' + '.png';
		document.getElementsByTagName('img')[1].src = 'library/' + niconiconii + '/' + lang + '/' + 'A (' + page + ')' + '.png';
		document.getElementById('num').innerHTML = page;
	}

	var superbe = document.querySelector("#pages")
	var superbe1 = document.querySelector("#pages1")
	var superbe2 = document.querySelector("#pages2")

	superbe.addEventListener('change', () => {
		console.log('Select change');
		console.log(superbe.value);
		choice();
	});
	superbe1.addEventListener('change', () => {
		console.log('Select change');
		console.log(superbe1.value);
		choice();
	});
	superbe2.addEventListener('change', () => {
		console.log('Select change');
		console.log(superbe2.value);
		choice();
	});







	function choice() {
		if (queue_url == 'vol1&total=5') {
			var truc = document.querySelector("#pages").value;


		} else if (queue_url == 'vol1&total=12') {
			var truc = document.querySelector("#pages1").value;
		} else {
			var truc = document.querySelector("#pages2").value;

		}
		var choix = document.getElementsByTagName('img')[0].src = 'library/' + niconiconii + '/' + lang + '/' + 'A (' + truc + ')' + '.png';

		if (queue_url == 'vol1&total=5') {
			page = + document.querySelector("#pages").value;

		} else if (queue_url == 'vol1&total=12') {
			page = document.querySelector("#pages1").value;
			page = + page;
		} else {
			page = document.querySelector("#pages2").value;
			page = + page;
		}

		if (superbe.value > 9 || superbe1.value > 9 || superbe2.value > 9) {
			change('=');
		} else {
			change('=');
		}


	}

	var urlcourante = document.location.href;

	// Supprimons l'éventuel dernier slash de l'URL
	var urlcourante = urlcourante.replace(/\/$/, "");

	// Gardons dans la variable queue_url uniquement la portion derrière le dernier slash de urlcourante
	var queue_url = urlcourante.substring(urlcourante.lastIndexOf("/") + 1);




	if (queue_url == 'vol1&total=5') {
		pages.style.display = 'unset';
		pages1.style.display = 'none';
		pages2.style.display = 'none';

	} else if (queue_url == 'vol1&total=12') {
		pages.style.display = 'none';
		pages1.style.display = 'unset';
		pages2.style.display = 'none';

	} else {
		pages.style.display = 'none';
		pages1.style.display = 'none';
		pages2.style.display = 'unset';
	}






	function changesize() {
		if (total <= 10) {
			document.getElementById('pages').size = total;
			document.getElementById('pages1').size = total;
			document.getElementById('pages2').size = total;
		} else {
			document.getElementById('pages').size = '10';
			document.getElementById('pages1').size = '10';
			document.getElementById('pages2').size = '10';
		}

	}
	function changesize2() {
		document.getElementById('pages').size = '1';
		document.getElementById('pages').blur();
		document.getElementById('pages1').size = '1';
		document.getElementById('pages1').blur();
		document.getElementById('pages2').size = '1';
		document.getElementById('pages2').blur();
	}


	function plusdix() {
		if (page == 1 && page <= total - 9) {
			page = page + 8;
		} else if (page <= total - 9) {
			page = page + 9;
		}
		change('+');

	}
	function isMobile() { return ('ontouchstart' in document.documentElement); }

	let iszoomable = 'false';
	if (limage1.style.position = "absolute") {
		iszoomable = false;
	} else {
		iszoomable = true;
	}

	let img8 = 'false'
	var page8 = 'file:///D:/Utilisateurs/Benjebara/Downloads/reader-main/library/color/vol1/jp/A%20(8).png';
	var urlimage2 = limage2.src;

	setInterval(() => {
		urlimage2 = limage2.src;
	}, 5);
	setInterval(() => {
		if (page8 === urlimage2) {
			img8 = true;
			document.getElementsByTagName('img')[0].style.height = '98vh';
			document.getElementsByTagName('img')[1].style.height = '98vh';
			document.getElementById('plaque').style.height = '98vh';
			limage1.style.marginBottom = "0%";
			zoomed = false;
			limage1.style.position = "absolute";
		} else {
			img8 = false;
		}
	}, 5);

	function zoom() {
		limage1.style.position = "unset";
		if (isMobile()) return;
		if (img8 === true) return;
		iszoomable = true;

		if (zoomed == false) {
			document.getElementsByTagName('img')[0].style.height = '200vh';
			document.getElementsByTagName('img')[1].style.height = '200vh';
			document.getElementById('plaque').style.height = '200vh';
			limage1.style.marginBottom = "-1%";
			limage2.style.marginLeft = "0%";
			zoomed = true;

		} else {
			document.getElementsByTagName('img')[0].style.height = '98vh';
			document.getElementsByTagName('img')[1].style.height = '98vh';
			document.getElementById('plaque').style.height = '98vh';
			limage1.style.marginBottom = "0%";
			zoomed = false;
			limage1.style.position = "absolute";

		}

	}
	function echelle() {


		if (zoomed === true) {

			limage1.style.marginbottom = "-1%";
			limage2.style.marginbottom = "-99%";
			limage2.style.marginleft = "0%";
		}

	}



	document.addEventListener("keydown", (e) => {
		if (e.keyCode == '37') {
			change('+');
		}

		if (e.keyCode == '39') {
			change('-');
		}

		if (e.keyCode == '13') {
			switchlang();
		}
	});




</script>

</html>